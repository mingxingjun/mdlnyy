(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{19324:()=>{},19825:()=>{},33206:e=>{e.exports={style:{fontFamily:"'Inter', 'Inter Fallback'",fontStyle:"normal"},className:"__className_e8ce0c",variable:"__variable_e8ce0c"}},47969:(e,r,t)=>{"use strict";t.d(r,{default:()=>c});var a=t(95155),o=t(6874),n=t.n(o),l=t(35695),i=t(12115),s=t(77644);let c=()=>{let e=(0,l.usePathname)(),[r,t]=(0,i.useState)(!1),{user:o,logout:c}=(0,s.A)(),d=(0,l.useRouter)(),m=async()=>{await c(),d.push("/")},u=[{label:"首页",path:"/"},{label:"角色百科",path:"/encyclopedia"},{label:"同人广场",path:"/gallery"},{label:"攻略中心",path:"/guide"}];return(0,a.jsxs)("nav",{className:"relative z-50 bg-white/80 dark:bg-gray-900/80 backdrop-blur-md shadow-sm",children:[(0,a.jsx)("div",{className:"container mx-auto px-4",children:(0,a.jsxs)("div",{className:"flex justify-between h-16",children:[(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsxs)(n(),{href:"/",className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-purple-500 to-pink-500 rounded-lg flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-white font-bold",children:"M"})}),(0,a.jsx)("span",{className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-purple-600 to-pink-600",children:"玛德蕾娜应援站"})]})}),(0,a.jsxs)("div",{className:"hidden md:flex items-center space-x-8",children:[u.map(r=>(0,a.jsxs)(n(),{href:r.path,className:"relative ".concat(e===r.path?"text-primary-color dark:text-primary-color font-medium":"text-gray-700 dark:text-gray-300 hover:text-primary-color dark:hover:text-primary-color"," transition-colors duration-300 group"),children:[r.label,(0,a.jsx)("span",{className:"absolute -bottom-1 left-0 w-0 h-0.5 bg-primary-color transition-all duration-500 group-hover:w-full"})]},r.path)),o?(0,a.jsx)("button",{onClick:m,className:"text-gray-700 dark:text-gray-300 hover:text-primary-color dark:hover:text-primary-color transition-colors duration-300",children:"退出登录"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(n(),{href:"/login",className:"relative ".concat("/login"===e?"text-primary-color dark:text-primary-color font-medium":"text-gray-700 dark:text-gray-300 hover:text-primary-color dark:hover:text-primary-color"," transition-colors duration-300 group"),children:["登录",(0,a.jsx)("span",{className:"absolute -bottom-1 left-0 w-0 h-0.5 bg-primary-color transition-all duration-500 group-hover:w-full"})]}),(0,a.jsxs)(n(),{href:"/register",className:"relative ".concat("/register"===e?"text-primary-color dark:text-primary-color font-medium":"text-gray-700 dark:text-gray-300 hover:text-primary-color dark:hover:text-primary-color"," transition-colors duration-300 group"),children:["注册",(0,a.jsx)("span",{className:"absolute -bottom-1 left-0 w-0 h-0.5 bg-primary-color transition-all duration-500 group-hover:w-full"})]})]})]}),(0,a.jsx)("div",{className:"md:hidden flex items-center",children:(0,a.jsx)("button",{onClick:()=>t(!r),className:"text-gray-700 dark:text-gray-300 hover:text-purple-500 dark:hover:text-purple-400","aria-label":"切换菜单",children:(0,a.jsx)("svg",{className:"w-6 h-6 transition-transform duration-300 ".concat(r?"transform rotate-90":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:r?"M6 18L18 6M6 6l12 12":"M4 6h16M4 12h16m-7 6h7"})})})})]})}),(0,a.jsx)("div",{className:"md:hidden absolute w-full bg-white dark:bg-gray-900 shadow-md transition-all duration-300 ease-in-out ".concat(r?"max-h-96 opacity-100":"max-h-0 opacity-0 overflow-hidden"),children:(0,a.jsxs)("div",{className:"px-4 py-3 space-y-3",children:[u.map(r=>(0,a.jsx)(n(),{href:r.path,className:"block py-2 ".concat(e===r.path?"text-primary-color dark:text-primary-color font-medium":"text-gray-700 dark:text-gray-300 hover:text-primary-color dark:hover:text-primary-color"," transition-colors duration-300"),onClick:()=>t(!1),children:r.label},r.path)),o?(0,a.jsx)("button",{onClick:()=>{m(),t(!1)},className:"block py-2 text-gray-700 dark:text-gray-300 hover:text-primary-color dark:hover:text-primary-color transition-colors duration-300",children:"退出登录"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n(),{href:"/login",className:"block py-2 ".concat("/login"===e?"text-primary-color dark:text-primary-color font-medium":"text-gray-700 dark:text-gray-300 hover:text-primary-color dark:hover:text-primary-color"," transition-colors duration-300"),onClick:()=>t(!1),children:"登录"}),(0,a.jsx)(n(),{href:"/register",className:"block py-2 ".concat("/register"===e?"text-primary-color dark:text-primary-color font-medium":"text-gray-700 dark:text-gray-300 hover:text-primary-color dark:hover:text-primary-color"," transition-colors duration-300"),onClick:()=>t(!1),children:"注册"})]})]})})]})}},56524:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,19324,23)),Promise.resolve().then(t.bind(t,77644)),Promise.resolve().then(t.bind(t,47969)),Promise.resolve().then(t.bind(t,72605)),Promise.resolve().then(t.t.bind(t,33206,23))},72605:(e,r,t)=>{"use strict";t.d(r,{default:()=>s});var a=t(95155),o=t(12115),n=t(43264),l=t(97431),i=t(45416);let s=()=>{let e=(0,o.useRef)(null),r=(0,o.useRef)(0),t=(0,o.useRef)(null),s=(0,o.useRef)(null),c=(0,o.useRef)(null),d=(0,o.useRef)(null),m=(0,o.useRef)(null);return(0,o.useEffect)(()=>{if(!e.current)return;let a=new n.Z58;t.current=a;let o=new n.ubm(75,window.innerWidth/window.innerHeight,.1,1e3);o.position.z=5,s.current=o;let u=new l.JeP({antialias:!0,alpha:!0});u.setSize(window.innerWidth,window.innerHeight),u.setPixelRatio(Math.min(window.devicePixelRatio,2)),e.current.appendChild(u.domElement),c.current=u;let h=new i.N(o,u.domElement);h.enableDamping=!0,h.dampingFactor=.05,h.enableZoom=!1,h.enablePan=!1,h.autoRotate=!0,h.autoRotateSpeed=.5,d.current=h;let p=new n.LoY,x=new Float32Array(4500);for(let e=0;e<4500;e++)x[e]=(Math.random()-.5)*10;p.setAttribute("position",new n.THS(x,3));let y=new n.BH$({size:.02,color:9647082,transparent:!0,opacity:.8,blending:n.EZo,depthWrite:!1}),g=new n.ONl(p,y);a.add(g),m.current=g;let f=new n.Gu$(1.5,32,32),v=new n.V9B({color:0xc084fc,transparent:!0,opacity:.3,wireframe:!0}),w=new n.eaF(f,v);a.add(w);let b=()=>{r.current=requestAnimationFrame(b),m.current&&(m.current.rotation.x+=5e-4,m.current.rotation.y+=75e-5),h.update(),u.render(a,o)};b();let k=()=>{s.current&&c.current&&(s.current.aspect=window.innerWidth/window.innerHeight,s.current.updateProjectionMatrix(),c.current.setSize(window.innerWidth,window.innerHeight))};window.addEventListener("resize",k);let N=e.current;return()=>{r.current&&cancelAnimationFrame(r.current),window.removeEventListener("resize",k),c.current&&c.current.dispose(),N&&N.firstChild&&N.removeChild(N.firstChild)}},[]),(0,a.jsx)("div",{ref:e,className:"w-full h-full","aria-hidden":"true"})}},77644:(e,r,t)=>{"use strict";t.d(r,{AuthProvider:()=>c,A:()=>d});var a=t(95155),o=t(12115),n=t(58801),l=t.n(n);t(57599);let i=t(49509).env.JWT_SECRET||"your-secret-key",s=(0,o.createContext)(void 0);function c(e){let{children:r}=e,[t,n]=(0,o.useState)(null),[c,d]=(0,o.useState)(!0);return(0,o.useEffect)(()=>{try{let e=localStorage.getItem("token"),r=localStorage.getItem("user");e&&r&&(l().verify(e,i),n(JSON.parse(r)))}catch(e){console.error("验证token失败:",e),localStorage.removeItem("token"),localStorage.removeItem("user")}finally{d(!1)}},[]),(0,a.jsx)(s.Provider,{value:{user:t,loading:c,login:(e,r)=>{localStorage.setItem("token",e),localStorage.setItem("user",JSON.stringify(r)),n(r)},logout:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),n(null)},isAuthenticated:!!t},children:r})}let d=()=>{let e=(0,o.useContext)(s);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}}},e=>{e.O(0,[455,831,367,268,134,877,416,874,441,964,358],()=>e(e.s=56524)),_N_E=e.O()}]);