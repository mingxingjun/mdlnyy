(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[235],{52388:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>u});var r=a(95155),s=a(12115),l=a(43463);function i(e){let{onSubmit:t}=e,[a,i]=(0,s.useState)({id:0,type:"image",title:"",author:"",url:"",content:"",tags:[],likes:0,createdAt:new Date().toISOString()}),[d,n]=(0,s.useState)(""),[c,o]=(0,s.useState)({}),x=e=>{let{name:t,value:a}=e.target;i(e=>({...e,[t]:a}))},g=()=>{d.trim()&&!a.tags.includes(d.trim())&&(i(e=>({...e,tags:[...e.tags,d.trim()]})),n(""))};return(0,r.jsxs)(l.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"max-w-2xl mx-auto bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 md:p-8 mb-12",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold mb-6 text-center text-gray-900 dark:text-white",children:"发布新作品"}),(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),(()=>{let e={};return a.title.trim()||(e.title="标题不能为空"),a.author.trim()||(e.author="作者名称不能为空"),"image"===a.type||"video"===a.type?a.url&&a.url.trim()?(e=>{try{return new URL(e),!0}catch(e){return!1}})(a.url)||(e.url="请输入有效的URL"):e.url="请输入图片或视频URL":"text"!==a.type||a.content&&a.content.trim()||(e.content="请输入文字内容"),0===a.tags.length&&(e.tags="请至少添加一个标签"),o(e),0===Object.keys(e).length})()&&(t({...a,likes:0,createdAt:new Date().toISOString().split("T")[0]}),i({id:0,type:"image",title:"",author:"",url:"",content:"",tags:[],likes:0,createdAt:new Date().toISOString()}),n(""))},className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"作品类型"}),(0,r.jsxs)("select",{name:"type",value:a.type,onChange:x,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[(0,r.jsx)("option",{value:"image",children:"图片"}),(0,r.jsx)("option",{value:"video",children:"视频"}),(0,r.jsx)("option",{value:"text",children:"文字"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"标题"}),(0,r.jsx)("input",{type:"text",name:"title",value:a.title,onChange:x,className:"w-full px-4 py-2 border rounded-lg ".concat(c.title?"border-red-500 dark:border-red-400":"border-gray-300 dark:border-gray-600","\n              bg-white dark:bg-gray-700 text-gray-900 dark:text-white")}),c.title&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-500 dark:text-red-400",children:c.title})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"作者名称"}),(0,r.jsx)("input",{type:"text",name:"author",value:a.author,onChange:x,className:"w-full px-4 py-2 border rounded-lg ".concat(c.author?"border-red-500 dark:border-red-400":"border-gray-300 dark:border-gray-600","\n              bg-white dark:bg-gray-700 text-gray-900 dark:text-white")}),c.author&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-500 dark:text-red-400",children:c.author})]}),"image"===a.type||"video"===a.type?(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"image"===a.type?"图片URL":"视频URL"}),(0,r.jsx)("input",{type:"text",name:"url",value:a.url,onChange:x,className:"w-full px-4 py-2 border rounded-lg ".concat(c.url?"border-red-500 dark:border-red-400":"border-gray-300 dark:border-gray-600","\n                bg-white dark:bg-gray-700 text-gray-900 dark:text-white"),placeholder:"https://example.com/image.jpg"}),c.url&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-500 dark:text-red-400",children:c.url})]}):(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"文字内容"}),(0,r.jsx)("textarea",{name:"content",value:a.content,onChange:x,rows:6,className:"w-full px-4 py-2 border rounded-lg ".concat(c.content?"border-red-500 dark:border-red-400":"border-gray-300 dark:border-gray-600","\n                bg-white dark:bg-gray-700 text-gray-900 dark:text-white")}),c.content&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-500 dark:text-red-400",children:c.content})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"标签"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2 mb-2",children:a.tags.map(e=>(0,r.jsxs)("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-300",children:[e,(0,r.jsx)("button",{type:"button",onClick:()=>{i(t=>({...t,tags:t.tags.filter(t=>t!==e)}))},className:"ml-1 text-purple-600 dark:text-purple-400 hover:text-purple-800 dark:hover:text-purple-200",children:"\xd7"})]},e))}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("input",{type:"text",value:d,onChange:e=>n(e.target.value),onKeyPress:e=>"Enter"===e.key&&g(),className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"输入标签，按回车添加"}),(0,r.jsx)("button",{type:"button",onClick:g,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"添加"})]}),c.tags&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-500 dark:text-red-400",children:c.tags})]}),(0,r.jsx)("div",{className:"text-center",children:(0,r.jsx)("button",{type:"submit",className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-full font-medium hover:opacity-90 transition-opacity",children:"发布作品"})})]})]})}var d=a(66766),n=a(27213),c=a(9803),o=a(5040),x=a(71007),g=a(51976);function m(e){let{posts:t,onLike:a}=e;return(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,r.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(e=>{var t;return(0,r.jsxs)(l.P.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"group relative bg-white dark:bg-gray-800 rounded-xl overflow-hidden shadow-md hover:shadow-xl transition-shadow",children:[(0,r.jsxs)("div",{className:"aspect-w-1 aspect-h-1",children:["image"===e.type&&(0,r.jsx)(d.default,{src:e.url,alt:e.title,width:600,height:400,className:"w-full h-64 object-cover"}),"video"===e.type&&(0,r.jsx)("div",{className:"w-full h-64 bg-gray-100 dark:bg-gray-700 flex items-center justify-center",children:(0,r.jsx)(c.A,{size:48,className:"text-gray-400",style:{backgroundImage:"url(".concat(e.url,")"),backgroundSize:"cover"}})}),"text"===e.type&&(0,r.jsxs)("div",{className:"w-full h-64 bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 p-6 overflow-hidden relative",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-white dark:from-gray-800 to-transparent pointer-events-none"}),(0,r.jsxs)("p",{className:"text-gray-700 dark:text-gray-300 line-clamp-6 relative z-10",children:[null==(t=e.content)?void 0:t.substring(0,150),"..."]})]})]}),(0,r.jsxs)("div",{className:"p-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(e=>{switch(e){case"image":return(0,r.jsx)(n.A,{size:16,className:"text-blue-500"});case"video":return(0,r.jsx)(c.A,{size:16,className:"text-red-500"});case"text":return(0,r.jsx)(o.A,{size:16,className:"text-green-500"});default:return null}})(e.type),(0,r.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:e.type})]}),(0,r.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:e.createdAt})]}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-1 line-clamp-1",children:e.title}),(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,r.jsx)(x.A,{size:14,className:"text-gray-500 dark:text-gray-400"}),(0,r.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:e.author})]}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-1 mb-3",children:[e.tags.slice(0,3).map(e=>(0,r.jsx)("span",{className:"px-2 py-0.5 text-xs rounded-full bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300",children:e},e)),e.tags.length>3&&(0,r.jsxs)("span",{className:"px-2 py-0.5 text-xs rounded-full bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300",children:["+",e.tags.length-3]})]})]}),(0,r.jsx)(l.P.div,{initial:{opacity:0,scale:.9},whileHover:{opacity:1,scale:1},className:"absolute inset-0 bg-black/40 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:(0,r.jsxs)("button",{onClick:()=>a(e.id),className:"bg-white/90 dark:bg-gray-800/90 p-3 rounded-full shadow-lg flex items-center gap-2",children:[(0,r.jsx)(g.A,{size:20,className:"text-red-500 fill-red-500"}),(0,r.jsx)("span",{className:"font-medium text-gray-900 dark:text-white",children:e.likes})]})})]},e.id)})}),0===t.length&&(0,r.jsx)("div",{className:"text-center py-16",children:(0,r.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"暂无作品，快去发布第一个作品吧！"})})]})}let p=[{id:1,type:"image",url:"https://picsum.photos/seed/madeline1/600/800",title:"玛德蕾娜的微笑",content:"",author:"粉丝1",tags:["插画","日常"],likes:124,createdAt:"2023-06-15"},{id:2,type:"video",url:"https://picsum.photos/seed/madeline2/600/400",title:"魔法展示",content:"",author:"粉丝2",tags:["动画","魔法"],likes:89,createdAt:"2023-06-10"},{id:3,type:"text",title:"星光下的约定",content:"那是一个星光璀璨的夜晚，玛德蕾娜与我许下了永恒的约定...",author:"粉丝3",tags:["小说","浪漫"],likes:56,createdAt:"2023-06-05"},{id:4,type:"image",url:"https://picsum.photos/seed/madeline4/600/600",title:"战斗姿态",content:"",author:"粉丝4",tags:["插画","战斗"],likes:98,createdAt:"2023-06-01"}];function u(){let[e,t]=(0,s.useState)(p),[a,l]=(0,s.useState)(!1),[d,n]=(0,s.useState)("全部"),c="全部"===d?e:e.filter(e=>e.tags.includes(d)),o=["全部",...new Set(e.flatMap(e=>e.tags))];return(0,r.jsxs)("div",{className:"py-12",children:[(0,r.jsx)("h1",{className:"text-4xl font-bold text-center mb-16 bg-clip-text text-transparent bg-gradient-to-r from-purple-600 to-pink-600",children:"同人广场"}),(0,r.jsx)("div",{className:"text-center mb-12",children:(0,r.jsx)("button",{onClick:()=>l(!a),className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-full font-medium hover:opacity-90 transition-opacity",children:a?"取消投稿":"发布新作品"})}),a&&(0,r.jsx)(i,{onSubmit:a=>{t([...e,{...a,id:Date.now(),likes:0,createdAt:new Date().toISOString()}]),l(!1)}}),(0,r.jsx)("div",{className:"flex flex-wrap justify-center gap-3 mb-12",children:o.map(e=>(0,r.jsx)("button",{onClick:()=>n(e),className:"px-4 py-2 rounded-full text-sm font-medium transition-all ".concat(d===e?"bg-purple-600 text-white":"bg-gray-100 dark:bg-gray-800 text-gray-800 dark:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-700"),children:e},e))}),(0,r.jsx)(m,{posts:c,onLike:a=>{t(e.map(e=>e.id===a?{...e,likes:e.likes+1}:e))}})]})}},53927:(e,t,a)=>{Promise.resolve().then(a.bind(a,52388))}},e=>{e.O(0,[463,580,441,964,358],()=>e(e.s=53927)),_N_E=e.O()}]);